# 计数
## 场景描述
- 多个线程在同时更新计数器
- 多个线程在获取计数器

## 简单加
```
1 unsigned long counter = 0;
2
3 static __inline__ void inc_count(void)
4 {
5 WRITE_ONCE(counter, READ_ONCE(counter) + 1);
6 }
7
8 static __inline__ unsigned long read_count(void)
9 {
10 return READ_ONCE(counter);
11 }
```
因为count++并发会有问题，zhe

<!--stackedit_data:
eyJoaXN0b3J5IjpbMTQ0MDUzMjQxNCw3MzA5OTgxMTZdfQ==
-->